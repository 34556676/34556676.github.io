"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9403],{7826:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>c,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"\u6570\u636e\u5e93/mysql/mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501","title":"mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501","description":"\u4e00\uff1a\u68c0\u67e5\u662f\u5426\u9501\u8868, \u67e5\u8be2\u8fdb\u7a0b\u5e76\u6740\u6b7b\u8fdb\u7a0b","source":"@site/docs/\u6570\u636e\u5e93/mysql/mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501.md","sourceDirName":"\u6570\u636e\u5e93/mysql","slug":"/\u6570\u636e\u5e93/mysql/mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501","permalink":"/docs/\u6570\u636e\u5e93/mysql/mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u6570\u636e\u5e93/mysql/mysql\u67e5\u770b\u662f\u5426\u9501\u8868\u5e76\u89e3\u9664\u9501.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"mysql\u5728win\u4e0b\u5b9a\u65f6\u5907\u4efd","permalink":"/docs/\u6570\u636e\u5e93/mysql/mysql\u5728win\u4e0b\u5b9a\u65f6\u5907\u4efd"},"next":{"title":"mysql\u6e05\u7a7a\u8868\u547d\u4ee4\uff1adelete\u548ctruncate\u533a\u522b","permalink":"/docs/\u6570\u636e\u5e93/mysql/mysql\u6e05\u7a7a\u8868\u547d\u4ee4\uff1adelete\u548ctruncate\u533a\u522b"}}');var l=s(4848),i=s(8453);const t={},c=void 0,o={},d=[];function h(n){const e={code:"code",li:"li",ol:"ol",p:"p",pre:"pre",...(0,i.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.p,{children:"\u4e00\uff1a\u68c0\u67e5\u662f\u5426\u9501\u8868, \u67e5\u8be2\u8fdb\u7a0b\u5e76\u6740\u6b7b\u8fdb\u7a0b"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u8be2\u662f\u5426\u9501\u8868"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"show open tables where in_use > 0;\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u8be2\u8fdb\u7a0b\uff08\u5982\u679c\u60a8\u6709SUPER\u6743\u9650\uff0c\u60a8\u53ef\u4ee5\u770b\u5230\u6240\u6709\u7ebf\u7a0b\u3002\u5426\u5219\uff0c\u60a8\u53ea\u80fd\u770b\u5230\u60a8\u81ea\u5df1\u7684\u7ebf\u7a0b\uff09"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"show processlist;\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6740\u6b7b\u8fdb\u7a0b(\u5c31\u662f[show processlist;]\u547d\u4ee4\u7684id\u5217)\r\n",(0,l.jsx)(e.code,{children:"kill 8"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u4e8c\uff1a\u67e5\u770b\u5728\u9501\u4e8b\u52a1,\u6740\u6b7b\u4e8b\u52a1\u5bf9\u5e94\u7684\u7ebf\u7a0bID"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u6b63\u5728\u9501\u7684\u4e8b\u52a1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"select * from information_schema.INNODB_LOCKS;\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u6740\u6b7b\u8fdb\u7a0bid\uff08\u5c31\u662f[select * from information_schema.INNODB_LOCKS; ]\u547d\u4ee4\u7684trx_mysql_thread_id\u5217\uff09\r\n",(0,l.jsx)(e.code,{children:"kill \u7ebf\u7a0bID"})]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u7b49\u5f85\u9501\u7684\u4e8b\u52a1"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"SELECT * FROM INFORMATION_SCHEMA.INNODB_LOCK_WAITS;\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:"\u5176\u5b83\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u670d\u52a1\u5668\u72b6\u6001"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"show status like '%lock%';\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u67e5\u770b\u8d85\u65f6\u65f6\u95f4\uff1a"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"show variables like '%timeout%';\n"})}),"\n",(0,l.jsx)(e.p,{children:"\u4e09\uff1a\u67e5\u770b\u9501\u548c\u4e8b\u52a1\u7684\u76f8\u5173\u4fe1\u606f"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"SELECT\r\n    trx_id,\r\n    trx_state,\r\n    lock_id,\r\n    lock_mode,\r\n    lock_type,\r\n    lock_table,\r\n    trx_mysql_thread_id,\r\n    trx_query\r\nFROM\r\n    information_schema.innodb_trx t\r\nJOIN information_schema.innodb_locks l ON l.lock_trx_id = t.trx_id;\n"})})]})}function a(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(h,{...n})}):h(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>c});var r=s(6540);const l={},i=r.createContext(l);function t(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:t(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);