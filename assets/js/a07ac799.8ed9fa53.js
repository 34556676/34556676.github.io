"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4024],{4440:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>r,toc:()=>i});const r=JSON.parse('{"id":"\u6570\u636e\u5e93/mysql/Mysql\u4e3b\u4ece\u914d\u7f6e","title":"Mysql\u4e3b\u4ece\u914d\u7f6e","description":"\u4e3b\u670d\u52a1\u5668\u914d\u7f6e\uff1a","source":"@site/docs/\u6570\u636e\u5e93/mysql/Mysql\u4e3b\u4ece\u914d\u7f6e.md","sourceDirName":"\u6570\u636e\u5e93/mysql","slug":"/\u6570\u636e\u5e93/mysql/Mysql\u4e3b\u4ece\u914d\u7f6e","permalink":"/docs/\u6570\u636e\u5e93/mysql/Mysql\u4e3b\u4ece\u914d\u7f6e","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u6570\u636e\u5e93/mysql/Mysql\u4e3b\u4ece\u914d\u7f6e.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"MySQL\u67e5\u8be2\u7f13\u5b58\u7b80\u5355\u4f7f\u7528","permalink":"/docs/\u6570\u636e\u5e93/mysql/MySQL\u67e5\u8be2\u7f13\u5b58\u7b80\u5355\u4f7f\u7528"},"next":{"title":"Mysql\u7684\u4e09\u79cd\u5b89\u88c5\u65b9\u5f0f","permalink":"/docs/\u6570\u636e\u5e93/mysql/Mysql\u7684\u4e09\u79cd\u5b89\u88c5\u65b9\u5f0f"}}');var t=n(4848),c=n(8453);const l={},a=void 0,o={},i=[];function d(e){const s={code:"code",img:"img",p:"p",pre:"pre",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"\u4e3b\u670d\u52a1\u5668\u914d\u7f6e\uff1a\r\n\u7b2c\u4e00\u6b65\uff1a\u7f16\u8f91\u914d\u7f6e\u6587\u4ef6my.cnf\u3002\u4fdd\u5b58\u6587\u4ef6\uff0c\u91cd\u542fMySQL"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"[mysqld]\r\n#\u6570\u636e\u5e93ID\u53f7\uff0c \u4e3a1\u65f6\u8868\u793a\u4e3aMaster,\u5176\u4e2dmaster_id\u5fc5\u987b\u4e3a1\u5230232\u20131\u4e4b\u95f4\u7684\u4e00\u4e2a\u6b63\u6574\u6570\u503c\uff0c\u4e3b\u4eceserver-id\u4e0d\u80fd\u4e00\u6837;\r\nserver-id=1\r\n#\u542f\u7528\u4e8c\u8fdb\u5236\u65e5\u5fd7;\u5982\u679c\u4e3b\u5e93\u662f\u5176\u4ed6\u5e93\u7684\u4ece\u5e93\u7684\u8bdd\u9700\u8981\u6dfb\u52a0\u6b64\u53c2\u6570\uff0c\u5426\u5219\u4ece\u5176\u5b83\u5e93\u540c\u6b65\u7684\u6570\u636e\u4e0d\u4f1a\u5199\u5165binlog\r\nlog-bin=/data/3306/binlog/mysql-bin \r\n #\u5982\u679c\u4e3b\u5e93\u662f\u5176\u4ed6\u5e93\u7684\u4ece\u5e93\u7684\u8bdd\u9700\u8981\u6dfb\u52a0\u6b64\u53c2\u6570\uff0c\u5426\u5219\u4ece\u5176\u5b83\u5e93\u540c\u6b65\u7684\u6570\u636e\u4e0d\u4f1a\u5199\u5165binlog\r\nlog-slave-updates=1\r\nsync-binlog=1\r\n#\u9700\u8981\u540c\u6b65\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u5e93\u540d\uff1b \r\nbinlog-do-db=test\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u7b2c\u4e8c\u6b65\uff1a\u521b\u5efa\u4ece\u670d\u52a1\u5668\u53ef\u4ee5\u767b\u5f55\u7684\u7528\u6237"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:"mysql>CREATE USER 'repl'@'%' IDENTIFIED BY 'w1ses0ft';\r\nmysql>GRANT REPLICATION SLAVE ON *.* TO repl@'%' IDENTIFIED BY 'w1ses0ft';\r\nmysql>FLUSH PRIVILEGES;\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u4e3bMySQL\u670d\u52a1\u5668\u4e8c\u8fdb\u5236\u6587\u4ef6\u540d\u4e0e\u4f4d\u7f6e SHOW MASTER STATUS;"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{src:"C:/Users/Adonis/Desktop/image-20210313185806259.png",alt:"image-20210313185806259"})}),"\n",(0,t.jsx)(s.p,{children:"\u4ece\u670d\u52a1\u5668\u914d\u7f6e\uff1a\r\n\u7b2c\u4e00\u6b65\uff1a\u544a\u77e5\u4ece\u5e93\u4e8c\u8fdb\u5236\u6587\u4ef6\u540d\u4e0e\u4f4d\u7f6e,\u5728\u4ece\u5e93\u4e2d\u6267\u884c\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sql",children:'CHANGE MASTER TO\r\n     master_host="172.17.32.19",\r\n     master_port=3506,\r\n     master_user="repl",\r\n     master_password="w1ses0ft",\r\n     master_log_file="mysqlbin.000003",\r\n     master_log_pos=1002;\n'})}),"\n",(0,t.jsx)(s.p,{children:"\u5982\u679c\u662fgitd\u590d\u5236\uff0c\u5219\u7528\u4e0b\u9762\u7684\u8bed\u53e5"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{children:"change master to master_host='172.17.32.19',master_port=3506,master_user='repl',master_password='w1ses0ft',MASTER_AUTO_POSITION = 1;\n"})}),"\n",(0,t.jsx)(s.p,{children:"\u7b2c\u4e8c\u6b65\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-shell",children:"mysql>start slave;   #\u5f00\u542f\u590d\u5236\uff08\u542f\u52a8slave\u540c\u6b65\u8fdb\u7a0b\uff09\r\nmysql>SHOW SLAVE STATUS\\G   #\u67e5\u770b\u4e3b\u4ece\u590d\u5236\u662f\u5426\u914d\u7f6e\u6210\u529f\n"})}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"GRANT SELECT,PROCESS,SUPER,REPLICATION SLAVE,CREATE,DELETE,INSERT,UPDATE ON *.* TO 'checkuser'@'10.3.56.%' identified by 'w1ses0ft';\r\n\r\nupdate user set host='10.56.3.%' where user='checkuser';\r\n\r\n pt-table-checksum --nocheck-replication-filters --no-check-binlog-format --recursion-method=processlist --replicate=checkdb.checksums --databases=oa --tables=wf_pending h=10.56.3.114,u=checkuser,p=w1ses0ft,P=3306\r\n\r\n\r\n\r\npt-table-sync --replicate=checkdb.checksums h=10.56.3.114,u=checkuser,p=w1ses0ft h=10.56.3.97,u=checkuser,p=w1ses0ft --verbose --print\n"})})]})}function m(e={}){const{wrapper:s}={...(0,c.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>a});var r=n(6540);const t={},c=r.createContext(t);function l(e){const s=r.useContext(c);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(c.Provider,{value:s},e.children)}}}]);